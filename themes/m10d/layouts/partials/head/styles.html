{{ $prelude := resources.Get "css/prelude.scss" | resources.ExecuteAsTemplate "css/prelude.scss" . | resources.ToCSS | resources.Minify | resources.Fingerprint -}}
{{ $style := resources.Get "css/main.scss" | resources.ExecuteAsTemplate "css/main.scss" . | resources.ToCSS | resources.Minify | resources.Fingerprint -}}
{{ $opts := dict "targetPath" "js/styles.js" "format" "cjs" "minify" "true" -}}
{{ $styleLoader := resources.Get "js/styles.ts" | js.Build $opts | fingerprint -}}

<link rel="stylesheet" href="{{- $prelude.RelPermalink -}}" />
<link rel="preload" href="{{- $style.RelPermalink -}}" as="style" integrity="{{ .Data.Integrity }}" />
<script src="{{ $styleLoader.RelPermalink }}" integrity="{{ $styleLoader.Data.Integrity }}" crossorigin="anonymous"
  async></script>
<noscript>
  <link rel="stylesheet" href="{{- $style.RelPermalink -}}" integrity="{{ $style.Data.Integrity }}" />
</noscript>